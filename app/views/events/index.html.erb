
<!-- 網站特色 -->
<div id="website-feaures" class="container-fluid row">
  <div class="title col-sm-12">
    <h2>The Wall</h2>
    <p>可以提供給您...</p>
  </div>
  <div class="website-feature col-sm-4">
    <p><%= icon('fas', 'bullhorn', class: "index-icon") %></p>
    <div class="feature-detail">
      <p>提醒您喜愛的樂團的演出</p>
    </div>
  </div>
  <div class="website-feature col-sm-4">
    <p><%= icon('fas', 'compass', class: "index-icon") %></p>
    <div class="feature-detail">
      <p>快速找到您要的表演</p>
    </div>
  </div>
  <div class="website-feature col-sm-4">
    <p><%= icon('fas', 'music', class: "index-icon") %></p>
    <div class="feature-detail">
      <p>開拓您對Indie的認識</p>
    </div>
  </div>
</div>

<!-- 近期表演 -->
<div id="recent-events" class="container-fluid row">
  <div class="title col-sm-12">
    <h2>近期表演資訊</h2>
  </div>
  <% @events.each do |event| %>
    <div class="recent-event col-md-4">
      <%= link_to event_path(event) do %>
        <%= image_tag event.photo, class: "img-fluid mx-auto d-block img-thumbnail"  %>
      <% end %>
      <div class="event-detail">
        <div class="follow-box">
          <%= render partial: "shared/user_follow_event", locals: {event: event} %>
        </div>
        <div class="date">
          <h3><%= event.date %>(<%= event.week %>)</h3>
        </div>
        <div class="name">
          <%= link_to event_path(event) do %>
            <h5><%= event.name %></h5>
          <% end %>
        </div>
        <hr>
        <div class="artist">
          <span class="badge badge-secondary">演出</span>
          <p>
            <%= event.artists.map {|artist| artist.name}.join(", ") %>
          </p>
        </div>
        <div class="place">
          <span class="badge badge-secondary">場地</span>
          <p><%= event.places[0].name %></p>
        </div>
        <div class="price">
          <span class="badge badge-secondary">票價</span>
          <p><%= event.price %></p>
        </div>
        <div class="time">
          <span class="badge badge-secondary">時間</span>
          <p><%= event.time %></p>
        </div>
      </div>
    </div>
  <% end %>
</div>


<!-- Google Map-->
  <script src="//maps.google.com/maps/api/js?key=AIzaSyC6XOGbKNgafoPUmAC_J3JCATY-4AaGkVE"></script>
  <script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
  <script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
  <h1>搜尋附近表演</h1>
  <div class="row">
    <div class="col-md-4"><%= link_to '台北' %></div>
    <div class="col-md-4"><%= link_to '台中' %></div>
    <div class="col-md-4"><%= link_to '高雄' %></div>
  </div>


  <ul id="markers_list">  </ul>
  <div id="map" style='width: 100%; height: 400px;'></div>

  <script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({
        provider: {
          Zoom: 5
          // pass in other Google Maps API options here
        },
        internal: {
          id: 'map'
        }
      },
      function(){
        markers = handler.addMarkers(<%= raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      }
    );

  </script>
